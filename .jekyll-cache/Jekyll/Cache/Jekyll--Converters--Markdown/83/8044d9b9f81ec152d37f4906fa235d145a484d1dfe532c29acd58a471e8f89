I"<h1 id="线程和进程深度解析">线程和进程深度解析</h1>

<h2 id="进程process和线程thread的区别">进程(Process)和线程(Thread)的区别：</h2>

<ul>
  <li><strong>根本区别</strong>：进程是操作系统资源分配的基本单位，而线程是处理器任务调度和执行的基本单位。一个进程可以包含一个或多个线程。</li>
  <li><strong>资源开销</strong>：每个进程都有独立的代码和数据空间（程序上下文），进程切换的开销大；线程可以看做轻量级的进程，同一类线程共享代码和数据空间，每个线程都有自己独立的运行栈和程序计数器（PC），线程切换的开销小。</li>
  <li><strong>影响关系</strong>：一个进程崩溃后，在保护模式下不会对其他进程产生影响。但是一个线程崩溃后，会导致整个进程崩溃。所以多进程要比多线程健壮。</li>
</ul>

<h3 id="进程间通信的方式">进程间通信的方式：</h3>

<ul>
  <li>
    <p><strong>共享内存（shared memory）</strong></p>

    <p>可以使多个进程访问同一内存空间，不同的进程可以看到对方进程对共享内存当中的数据作出的更新。因此，还需要依赖同步操作，例如互斥锁和信号量。</p>
  </li>
  <li>
    <p><strong>套接字SOCKET</strong></p>

    <p>socket也是一种进程间通信机制，与其他通信机制不同的是，它可用于不同主机之间的进程通信。</p>
  </li>
  <li>
    <p><strong>管道</strong></p>

    <ul>
      <li><strong>匿名管道（PIPE）</strong>：数据只能在一个方向上流通，只能用于具有亲缘关系的进程之间的通信。不属于任何文件系统，而存在于内存之中。</li>
      <li><strong>有名管道（FIFO）</strong>：可以在无关的进程之间交换数据。它以一种特殊设备文件形式存在于文件系统中。</li>
    </ul>
  </li>
  <li>
    <p><strong>系统IPC</strong></p>
    <ul>
      <li><strong>消息队列</strong>：是消息的链接表，存放在内核中。一个消息队列由一个标识符（即队列ID）来标记。</li>
      <li><strong>信号量</strong>：用来控制多个进程对共享资源的访问的计数器，用于共享内存中</li>
    </ul>
  </li>
</ul>

<h3 id="线程间通信的方式">线程间通信的方式：</h3>

<ul>
  <li>
    <p><strong>临界区</strong>：通过多线程的串行化来访问公共资源或一段代码，速度快，适合控制数据访问</p>
  </li>
  <li><strong>互斥量Synchronized/Lock</strong>：采用互斥对象机制，只有拥有互斥对象的线程才有访问公共资源的权限。因为互斥对象只有一个，所以可以保证公共资源不会被多个线程同时访问</li>
  <li><strong>信号量Semphare</strong>：为控制具有有限数量的用户资源而设计的，它允许多个线程在同一时刻去访问同一个资源，但一般需要限制同一时刻访问此资源的最大线程数目。</li>
  <li><strong>事件(信号)，Wait/Notify</strong>：通过通知操作的方式来保持多线程同步，还可以方便的实现多线程优先级的比较操作进程间通信的方式：</li>
</ul>

<p><a href="../">back</a></p>

:ET